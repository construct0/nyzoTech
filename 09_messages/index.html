<link rel="stylesheet" type="text/css" href="../style.css">

<h1>Messages</h1>

<p>
    This page will include descriptions of all messages used in Nyzo. Only currently used messages will be included.
</p>

<div class="table">

    <div class="header-row">
        <div>name</div>
        <div>number</div>
        <div>description</div>
    </div>

    <div class="data-row">
        <div>invalid</div>
        <div>0</div>
        <div>
            A placeholder number. Unused. As the name indicates, not a valid message.
        </div>
    </div>

    <div class="data-row">
        <div>transaction</div>
        <div>5</div>
        <div>
            Contains a single Nyzo transaction.
        </div>
    </div>

    <div class="data-row">
        <div>transaction response</div>
        <div>6</div>
        <div>
            Returned to the sender of a transaction message. Indicates whether the transaction was accepted. Includes a
            field for a human-readable message explaining acceptance or rejection of the transaction.
        </div>
    </div>

    <div class="data-row">
        <div>previous-hash request</div>
        <div>7</div>
        <div>
            Requests the height and hash of the verifier's current frozen edge.
        </div>
    </div>

    <div class="data-row">
        <div>previous-hash response</div>
        <div>8</div>
        <div>
            Returned in response to a previous-hash request. Should contain the height and hash of the frozen edge. This
            information is used when building transactions.
        </div>
    </div>

    <div class="data-row">
        <div>new block</div>
        <div>9</div>
        <div>
            Used by verifiers to send newly produced blocks to other verifiers.
        </div>
    </div>

    <div class="data-row">
        <div>new-block response</div>
        <div>10</div>
        <div>
            Acknowledges receipt of a new block.
        </div>
    </div>

    <div class="data-row">
        <div>block request</div>
        <div>11</div>
        <div>
            Used to request a series of blocks and, optionally, an initial balance list.
        </div>
    </div>

    <div class="data-row">
        <div>block response</div>
        <div>12</div>
        <div>
            Sent in response to a block request. To conserve resources, verifiers are configured to respond to block
            requests for no more than 10 blocks at a time and to limit frequency of responses that include balance
            lists.
        </div>
    </div>

    <div class="data-row">
        <div>transaction-pool request</div>
        <div>13</div>
        <div>
            Requests pending transactions from a verifier. This request must be self-signed (signed with the verifier's
            own private key).
        </div>
    </div>

    <div class="data-row">
        <div>transaction-pool response</div>
        <div>14</div>
        <div>
            Sent in response to a transaction-pool request. If the request is not self-signed, a valid but empty
            response is returned. Contains full transaction information for all pending transactions on the verifier.
        </div>
    </div>

    <div class="data-row">
        <div>mesh request</div>
        <div>15</div>
        <div>
            Requests a list of all nodes in the cycle.
        </div>
    </div>

    <div class="data-row">
        <div>mesh response</div>
        <div>16</div>
        <div>
            Sent in response to a mesh request. Returns a list of all nodes in the cycle. Each node includes identifier,
            IP address, TCP port, and queue timestamp according to the responding verifier. Currently has a maximum size
            of 10,000 nodes, but this limit should not be a concern for many years.
        </div>
    </div>

    <div class="data-row">
        <div>status request</div>
        <div>17</div>
        <div>
            Requests the status of the verifier. If the request is self-signed (signed with the verifier's own private
            key), the status response will contain additional details not contained in a typical status response.
        </div>
    </div>

    <div class="data-row">
        <div>status response</div>
        <div>18</div>
        <div>
            Sent in response to a status request. Provides, in plain text, various information about the current
            operational state of the verifier. If the status request is self-signed (signed with the verifier's own
            private key), this response will contain additional details not contained in a typical status response.
        </div>
    </div>

    <div class="data-row">
        <div>block vote</div>
        <div>19</div>
        <div>
            Sent to indicate choice of a block to become the new frozen edge. Contains the hash and block height of the
            block, along with the current timestamp. <span class="italic">Sent over UDP.</span>
        </div>
    </div>

    <div class="data-row">
        <div>block-vote response</div>
        <div>20</div>
        <div>
            An empty message indicating receipt of a block vote. While verifiers still produce this message in response
            to TCP block vote messages, they are seldom used because block votes are now sent over UDP.
        </div>
    </div>

    <div class="data-row">
        <div>new-verifier vote</div>
        <div>21</div>
        <div>
            Sent to indicate choice of the next verifier to join the cycle. <span class="italic">Sent over UDP.</span>
        </div>
    </div>

    <div class="data-row">
        <div>new-verifier vote response</div>
        <div>22</div>
        <div>
            An empty message indicating receipt of a new-verifier vote. While verifiers still produce this message in
            response to TCP new-verifier vote messages, they are seldom used because new-verifier votes are now sent
            over UDP.
        </div>
    </div>

    <div class="data-row">
        <div>missing-block-vote request</div>
        <div>23</div>
        <div>
            Requests a verifier's block vote at a specified height.
        </div>
    </div>

    <div class="data-row">
        <div>missing-block-vote response</div>
        <div>24</div>
        <div>
            Sent in response to a missing-block-vote request. Contains the vote for the requested height, if available.
        </div>
    </div>

    <div class="data-row">
        <div>missing-block request</div>
        <div>25</div>
        <div>
            Requests a missing block with a specified hash and height.
        </div>
    </div>

    <div class="data-row">
        <div>missing-block response</div>
        <div>26</div>
        <div>
            Sent in response to a missing-block request. Contains the block with the request height and hash, if
            available.
        </div>
    </div>

    <div class="data-row">
        <div>timestamp request</div>
        <div>27</div>
        <div>
            Requests the current timestamp of a verifier.
        </div>
    </div>

    <div class="data-row">
        <div>timestamp response</div>
        <div>28</div>
        <div>
            Sent in a response to a timestamp request. Contains the current timestamp of the verifier.
        </div>
    </div>

    <div class="data-row">
        <div>hash-vote override request</div>
        <div>29</div>
        <div>
            Requests setting the manual block-vote override to a specified hash at a specified height. If the hash is
            all zeros, clears the manual block-vote override at the specified height. This request must be self-signed
            (signed with the verifier's own private key).
        </div>
    </div>

    <div class="data-row">
        <div>hash-vote override response</div>
        <div>30</div>
        <div>
            Acknowledges receipt of a hash-vote override request. Indicates whether the override was accepted. Includes
            a plain-text explanation.
        </div>
    </div>

    <div class="data-row">
        <div>consensus-threshold override request</div>
        <div>31</div>
        <div>
            Requests setting the consensus threshold to a value other than 75% for the specified height. Expressed as an
            integer percentage of cycle length. If the value is 0, clears the consensus-threshold override at the
            specified height. This request must be self-signed (signed with the verifier's own private key).
        </div>
    </div>

    <div class="data-row">
        <div>consensus-threshold override response</div>
        <div>32</div>
        <div>
            Acknowledges receipt of a consensus-threshold override request. Indicates whether the override was accepted.
            Includes a plain-text explanation.
        </div>
    </div>

    <div class="data-row">
        <div>new-verifier-vote override request</div>
        <div>33</div>
        <div>
            Requests setting the new-verifier vote to the specified identifier. A value of all zeros erases the
            override. If not erased with a new override request, the override will persist until restart of the verifier
            or until the verifier represented by the override joins the cycle. This request must be self-signed (signed
            with the verifier's own private key).
        </div>
    </div>

    <div class="data-row">
        <div>new-verifier-vote override response</div>
        <div>34</div>
        <div>
            Acknowledges receipt of a new-verifier-vote override request. Indicates whether the override was accepted.
            Includes a plain-text explanation.
        </div>
    </div>
</div>